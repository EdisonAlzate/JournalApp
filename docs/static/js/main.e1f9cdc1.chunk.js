(this["webpackJsonppractice-journal"]=this["webpackJsonppractice-journal"]||[]).push([[0],{171:function(e,t,n){},172:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(32),r=n.n(c),o=n(20),s=n(8),i=n(21),u=n(10),l=n(9),d=n.n(l),j=n(15),b="[Auth] Login",p="[Auth] Logout",h="[ui] Set Error",O="[ui] Remove Error",f="[iu] start loading",m="[iu] Finish loading",x="[notes] New Active ",v="[notes] notes up state",g="[notes] notes update",y="[notes] note Delete",w="[notes] notes LogOut Delete",_="[notes] notes New Note Add",N=n(28);n(173),n(76);N.a.initializeApp({apiKey:"AIzaSyCNwD20rEmVbFFwKMg4-QGSXQfeu5wPFHQ",authDomain:"journalpractice2.firebaseapp.com",projectId:"journalpractice2",storageBucket:"journalpractice2.appspot.com",messagingSenderId:"513429306810",appId:"1:513429306810:web:3e65927c48232dfed3f183"});var k=N.a.firestore(),C=new N.a.auth.GoogleAuthProvider,E=function(e){return{type:h,payload:e}},S=function(){return{type:m}},A=n(22),P=n.n(A),D=n(4),L=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.collection("".concat(t,"/journal/notes")).get();case 2:return n=e.sent,a=[],console.log(a),n.forEach((function(e){a.push(Object(D.a)({id:e.id},e.data()))})),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.cloudinary.com/v1_1/drhc7hliy/upload",(n=new FormData).append("upload_preset","react-journal"),n.append("file",t),e.prev=4,e.next=7,fetch("https://api.cloudinary.com/v1_1/drhc7hliy/upload",{method:"POST",body:n});case 7:if(!(a=e.sent).ok){e.next=15;break}return e.next=11,a.json();case 11:return c=e.sent,e.abrupt("return",c.secure_url);case 15:return e.next=17,a.json();case 17:throw e.sent;case 18:e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(4),e.t0;case 23:case"end":return e.stop()}}),e,null,[[4,20]])})));return function(t){return e.apply(this,arguments)}}(),F=function(e,t){return{type:_,payload:Object(D.a)({id:e},t)}},G=function(e,t){return{type:x,payload:Object(D.a)({id:e},t)}},R=function(e){return{type:v,payload:e}},z=function(e){return function(){var t=Object(j.a)(d.a.mark((function t(n,a){var c,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a().authh.uid,e.url||delete e.url,delete(r=Object(D.a)({},e)).id,t.next=6,k.doc("".concat(c,"/journal/notes/").concat(e.id)).update(r);case 6:n(T(e.id,r)),P.a.fire("Saved",e.title,"success");case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},T=function(e,t){return{type:g,payload:{id:e,note:Object(D.a)({id:e},t)}}},W=function(e){return{type:y,payload:e}},B=function(e,t){return function(n){n({type:f}),N.a.auth().signInWithEmailAndPassword(e,t).then((function(e){var t=e.user;n(Q(t.uid,t.displayName)),n(S())})).catch((function(e){console.log(e),n(S()),P.a.fire("Error",e.message,"error")}))}},Q=function(e,t){return{type:b,payload:{uid:e,displayName:t}}},U=function(){return{type:p}},X=n(34),q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(o.a)(t,2),c=n[0],r=n[1],s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;r(t)},i=function(e){var t=e.target;r(Object(D.a)(Object(D.a)({},c),{},Object(X.a)({},t.name,t.value)))};return[c,i,s]},J=n(1),K=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.notes})).active;return Object(J.jsxs)("div",{className:"notes__appbar",children:[Object(J.jsx)("span",{children:"28 de Agosto 2020"}),Object(J.jsx)("input",{id:"fileSelector",type:"file",style:{display:"none"},onChange:function(t){var n=t.target.files[0];n&&e(function(e){return function(){var t=Object(j.a)(d.a.mark((function t(n,a){var c,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a().notes.active,P.a.fire({title:"Uploading...",text:"Please wait...",allowOutsideClick:!1,onBeforeOpen:function(){P.a.showLoading()}}),t.next=4,I(e);case 4:r=t.sent,console.log(r),P.a.close(),c.url=r,n(z(c));case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(n))},name:"file"}),Object(J.jsxs)("div",{children:[Object(J.jsx)("button",{className:"btn",onClick:function(){document.querySelector("#fileSelector").click()},children:"Picture"}),Object(J.jsx)("button",{className:"btn",onClick:function(){e(z(t))},children:"Save"})]})]})},M=function(){var e=Object(s.c)((function(e){return e.notes})).active,t=q(e),n=Object(o.a)(t,3),c=n[0],r=n[1],i=n[2],u=Object(s.b)(),l=c.body,b=c.title,p=c.id,h=Object(a.useRef)(e.id);Object(a.useEffect)((function(){e.id!==h.current&&(i(e),h.current=e.id)}),[e,i]),Object(a.useEffect)((function(){u(G(c.id,Object(D.a)({},c))),console.log(c)}),[c,u]);return Object(J.jsxs)("div",{className:"notes__main-content",children:[Object(J.jsx)(K,{}),Object(J.jsxs)("div",{className:"notes__content",children:[Object(J.jsx)("input",{type:"text",className:"notes__input-title",placeholder:"Some awesome title",value:b,name:"title",onChange:r}),Object(J.jsx)("textarea",{className:"notes__texArea",placeholder:"whatt happend today",value:l,name:"body",onChange:r}),e.url&&Object(J.jsx)("div",{className:"notes__image",children:Object(J.jsx)("img",{src:e.url,alt:"imagen"})})]}),Object(J.jsx)("button",{className:"btn btn-danger",onClick:function(){u(function(e){return function(){var t=Object(j.a)(d.a.mark((function t(n,a){var c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a().authh.uid,t.next=3,k.doc("".concat(c,"/journal/notes/").concat(e)).delete();case 3:n(W(e));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(p))},children:"Delete"})]})},V=function(){return Object(J.jsxs)("div",{className:"nothing__main-content",children:[Object(J.jsxs)("p",{children:["Select Something",Object(J.jsx)("br",{}),"Or create an entry"]}),Object(J.jsx)("i",{className:"far fa-star fa-4x mt-5"})]})},H=n(62),Y=n.n(H),Z=function(e){var t=e.id,n=e.body,a=e.date,c=e.title,r=e.url,o=Object(s.b)(),i=Y()(a);return Object(J.jsxs)("div",{className:"journal__entry",onClick:function(){console.log("click in entry"),o(G(t,{body:n,date:a,title:c,url:r}))},children:[r&&Object(J.jsx)("div",{className:"journal__entry-picture",style:{backgroundSize:"cover",backgroundImage:"url(".concat(r,")")}}),Object(J.jsxs)("div",{children:[Object(J.jsx)("h2",{children:c}),Object(J.jsx)("p",{children:n})]}),Object(J.jsxs)("div",{className:"journal__entryDate",children:[Object(J.jsx)("p",{children:i.format("dddd")}),Object(J.jsx)("span",{children:i.format("Do")})]})]})},$=function(){var e=Object(s.c)((function(e){return e.notes})).notes;return Object(J.jsx)("div",{className:"journal__entries",children:e.map((function(e){return Object(J.jsx)(Z,Object(D.a)({},e),e)}))})},ee=function(){var e=Object(s.c)((function(e){return e.authh})).name,t=Object(s.b)();return Object(J.jsxs)("aside",{className:"journal__sidebar-content",children:[Object(J.jsxs)("div",{className:"journal__sidebar-appbar",children:[Object(J.jsxs)("h3",{children:[Object(J.jsx)("i",{className:"far fa-moon"}),Object(J.jsxs)("span",{children:[" ",e]})]}),Object(J.jsx)("button",{className:"btn",onClick:function(){console.log("click logout"),t(function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.auth().signOut();case 2:t(U()),t({type:w});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Logout"})]}),Object(J.jsxs)("div",{className:"journal__sidebar-newEntry",onClick:function(){t(function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a,c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n().authh.uid,console.log(a),c={title:"",body:"",date:(new Date).getTime()},e.next=5,k.collection("".concat(a,"/journal/notes")).add(c);case 5:r=e.sent,t(G(r.id,c)),t(F(r.id,c));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),console.log("click new entry")},children:[Object(J.jsx)("i",{className:"far fa-calendar-plus fa-5x"}),Object(J.jsx)("p",{children:"New entry"})]}),Object(J.jsx)($,{})]})},te=function(){var e=Object(s.c)((function(e){return e.notes})).active;return console.log(e),Object(J.jsxs)("div",{className:"journal__main-content",children:[Object(J.jsx)(ee,{}),Object(J.jsx)("main",{children:e?Object(J.jsx)(M,{}):Object(J.jsx)(V,{})})]})},ne=function(){var e=Object(s.c)((function(e){return e.ui})).loading,t=Object(s.b)(),n=q({email:"andres@gmail.com",password:"123456"}),a=Object(o.a)(n,2),c=a[0],r=a[1],u=c.email,l=c.password;return Object(J.jsxs)("div",{children:[Object(J.jsx)("h3",{children:"Login"}),Object(J.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(u,l),t(B(u,l))},children:[Object(J.jsx)("input",{className:"auth__input",type:"text",placeholder:"Email",autoComplete:"off",name:"email",value:u,onChange:r}),Object(J.jsx)("input",{className:"auth__input",type:"password",placeholder:"Password",name:"password",value:l,onChange:r}),Object(J.jsx)("button",{className:"btn btn-primary btn-block",disabled:e,type:"submit",children:"Login"})]}),Object(J.jsxs)("div",{className:"auth__social-network",children:[Object(J.jsx)("p",{children:"Login with social networks"}),Object(J.jsxs)("div",{className:"google-btn",onClick:function(){console.log("loginGoogle"),t((function(e){N.a.auth().signInWithPopup(C).then((function(t){var n=t.user;e(Q(n.uid,n.displayName))}))}))},children:[Object(J.jsx)("div",{className:"google-icon-wrapper",children:Object(J.jsx)("img",{className:"google-icon",src:"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg",alt:"google button"})}),Object(J.jsx)("p",{className:"btn-text",children:Object(J.jsx)("b",{children:"Sign in with google"})})]}),Object(J.jsx)(i.b,{to:"/auth/register",className:"link",children:"Create new account"})]})]})},ae=n(63),ce=n.n(ae),re=function(){var e=q({name:"edison",email:"edisonalzate11@gmail.com",password:"123456",password2:"123456"}),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(s.b)(),r=Object(s.c)((function(e){return e.ui})).msgError,u=n.name,l=n.email,b=n.password,p=n.password2,h=function(){return 0===u.trim().length?(c(E("name is required")),!1):ce.a.isEmail(l)?b!==p||b.length<5?(c(E("the password should be at least 6 words and match each other ")),!1):(c({type:O}),!0):(c(E("email invalid")),!1)};return Object(J.jsxs)("div",{children:[Object(J.jsx)("h3",{children:"Register"}),Object(J.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(u,l,b,p)},children:[r&&Object(J.jsx)("p",{className:"auth__warning-form",children:r}),Object(J.jsx)("input",{className:"auth__input",type:"text",placeholder:"Name",autoComplete:"off",name:"name",value:u,onChange:a}),Object(J.jsx)("input",{className:"auth__input",type:"text",placeholder:"Email",autoComplete:"off",name:"email",value:l,onChange:a}),Object(J.jsx)("input",{className:"auth__input",type:"password",placeholder:"Password",name:"password",value:b,onChange:a}),Object(J.jsx)("input",{className:"auth__input",type:"password",placeholder:"Confirm Password",name:"password2",value:p,onChange:a}),Object(J.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){h()&&c(function(e,t,n){return function(a){N.a.auth().createUserWithEmailAndPassword(e,t).then(function(){var e=Object(j.a)(d.a.mark((function e(t){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.user,e.next=3,c.updateProfile({displayName:n});case 3:a(Q(c.uid,c.displayName)),console.log(c.displayName);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){P.a.fire("Error",e.message,"error")}))}}(l,b,u))},children:"Register"})]}),Object(J.jsx)("div",{className:"auth__social-network",children:Object(J.jsx)(i.b,{to:"/auth/login",className:"link",children:"Already register ?"})})]})},oe=function(){return Object(J.jsx)("div",{className:"auth__main-content",children:Object(J.jsx)("div",{className:"auth__box-container",children:Object(J.jsxs)(u.d,{children:[Object(J.jsx)(u.b,{path:"/auth/login",component:ne}),Object(J.jsx)(u.b,{path:"/auth/register",component:re})]})})})},se=n(35),ie=function(e){var t=e.isAuthenticated,n=e.component,a=Object(se.a)(e,["isAuthenticated","component"]);return Object(J.jsx)(u.b,Object(D.a)(Object(D.a)({},a),{},{component:function(e){return t?Object(J.jsx)(n,Object(D.a)({},e)):Object(J.jsx)(u.a,{to:"/auth/login"})}}))},ue=function(e){var t=e.isAuthenticated,n=e.component,a=Object(se.a)(e,["isAuthenticated","component"]);return Object(J.jsx)(u.b,Object(D.a)(Object(D.a)({},a),{},{component:function(e){return t?Object(J.jsx)(u.a,{to:"/"}):Object(J.jsx)(n,Object(D.a)({},e))}}))},le=function(){var e=Object(a.useState)(!0),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),l=Object(o.a)(r,2),b=l[0],p=l[1],h=Object(s.b)();return Object(a.useEffect)((function(){N.a.auth().onAuthStateChanged((function(e){var t;(null===e||void 0===e?void 0:e.uid)?(h(Q(e.uid,e.displayName)),p(!0),h((t=e.uid,function(){var e=Object(j.a)(d.a.mark((function e(n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(t);case 2:a=e.sent,n(R(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))):p(!1),c(!1)}))}),[h,p,c]),n?Object(J.jsx)("p",{children:"Please Wait "}):Object(J.jsx)(i.a,{children:Object(J.jsx)("div",{children:Object(J.jsx)("div",{children:Object(J.jsxs)(u.d,{children:[Object(J.jsx)(ue,{path:"/auth",component:oe,isAuthenticated:b}),Object(J.jsx)(ie,{exact:!0,path:"/",component:te,isAuthenticated:b}),Object(J.jsx)(u.a,{to:"/auth/login"})]})})})})},de=n(29),je=n(64),be=n(43),pe={notes:[],active:null},he={loading:!1,msgError:null},Oe="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||de.c,fe=Object(de.b)({authh:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return{uid:t.payload.uid,name:t.payload.displayName};case p:return{};default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(D.a)(Object(D.a)({},e),{},{msgError:t.payload});case O:return Object(D.a)(Object(D.a)({},e),{},{msgError:null});case f:return Object(D.a)(Object(D.a)({},e),{},{loading:!0});case m:return Object(D.a)(Object(D.a)({},e),{},{loading:!1});default:return e}},notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(D.a)(Object(D.a)({},e),{},{active:Object(D.a)({},t.payload)});case v:return Object(D.a)(Object(D.a)({},e),{},{notes:Object(be.a)(t.payload)});case g:return Object(D.a)(Object(D.a)({},e),{},{notes:e.notes.map((function(e){return e.id===t.payload.id?t.payload.note:e}))});case y:return Object(D.a)(Object(D.a)({},e),{},{active:null,notes:e.notes.filter((function(e){return e.id!==t.payload}))});case w:return Object(D.a)(Object(D.a)({},e),{},{active:null,notes:[]});case _:return Object(D.a)(Object(D.a)({},e),{},{notes:[t.payload].concat(Object(be.a)(e.notes))});default:return e}}}),me=Object(de.d)(fe,Oe(Object(de.a)(je.a))),xe=function(){return Object(J.jsx)(J.Fragment,{children:Object(J.jsx)(s.a,{store:me,children:Object(J.jsx)(le,{})})})};n(171);r.a.render(Object(J.jsx)(xe,{}),document.getElementById("root"))}},[[172,1,2]]]);
//# sourceMappingURL=main.e1f9cdc1.chunk.js.map